<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>

  // Variables
  const xhr = new XMLHttpRequest();
  const threshold = 0.1;
  const intersectionTargets = document.querySelectorAll("#htv section");
  const intersectionObserver = new IntersectionObserver(
    entries => entries.forEach(
      entry => {
        if (entry.isIntersecting && entry.intersectionRatio >= threshold) {
          intersectionObserver.unobserve(entry.target);
          console.log(entry);
        }
      }
    ),
    { threshold: [threshold] }
  );


  // Sets up particle background
  particlesJS.load('header', 'assets/particles.json');

  // Gets leaf
  xhr.addEventListener("load", () => {
    const svg = xhr.responseXML.documentElement;
    document.querySelectorAll(".htv__leaf").forEach(el => {
      el.appendChild(svg);
      el.children[0].style.fill = "#a0c642";
    });
  });

  xhr.open("GET", "assets/leaf.svg");
  xhr.send("");

  // Intersection Observer
  console.log(intersectionTargets);
  Array.from(intersectionTargets).forEach(target =>
    intersectionObserver.observe(target)
  );

  // Get on scroll event
  window.onscroll = function(e) {
      const navElement = document.getElementById("nav");
      let top  = window.pageYOffset || document.documentElement.scrollTop
      if(top > 200) {
          navElement.classList.add("nav-active");
      } else {
          navElement.classList.remove("nav-active");
      }
  };

  function toggleNavigation() {
      const navElement = document.getElementById("nav");
      if(navElement.classList.contains("nav-extended")) {
          navElement.classList.remove("nav-extended");
      } else {
          navElement.classList.add("nav-extended");
      }
  }


</script>